@model ChatRoomViewModel

@{
    ViewBag.Title = $"Chat Room";
    Layout = "_Layout";
}

<h2>Chat Room @Model.Name</h2>

<div class="container">
    <div class="row">&nbsp;</div>
    
    <form asp-action="SendMessage" method="post" id="messageForm">
        <input name="chatRoomId" type="hidden" id="chatRoomId" value="@Model.Id" />
        <div class="row">
            <div class="col-4">Author Id</div>
            <div class="col-4"><input type="text" name="authorId" id="authorId" /></div>
        </div>
        <div class="row">
            <div class="col-4">Author Name</div>
            <div class="col-4"><input type="text" name="authorName" id="authorName" /></div>
        </div>
        <div class="row">
            <div class="col-4">Message</div>
            <div class="col-4"><textarea type="text" name="message" id="messageInput"></textarea></div>
        </div>
        <div class="col-6">
            <button type="submit" id="sendButton">Send Message</button>
        </div>
    </form>
</div>
<div class="row">
    <div class="col-12">
        <hr />
    </div>
</div>
<div class="row">
    <div class="col-12">
        <ul id="messagesList">
            @foreach (var chatMessage in Model.Conversation)
            {
                <li>@chatMessage.AuthorName says @chatMessage.Message</li>
            }
        </ul>
    </div>
</div>

@section Scripts
{
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/chat.js"></script>
}
